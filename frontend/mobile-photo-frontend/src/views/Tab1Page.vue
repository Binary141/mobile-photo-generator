
<template>
  <ion-page>
    <ion-content :fullscreen="true">

      <div style="display: flex; justify-content: center;">
        <img v-bind:src="imageUrl">
      </div>
      <ion-item style="max-width: 1000px; margin: auto;"  v-if="!loading">

        <ion-label>Input:</ion-label>
        <ion-input type="text" placeholder="type something here..." v-model="input" v-on:keydown.enter="sendInput()"></ion-input>
        <ion-button shape="round" @click="sendInput()">GO!</ion-button>
      </ion-item>

      <div v-else id="loadingAnimation" style="display:flex; justify-content:center; padding-top: 30px;">
        {{this.loadingText}}
      </div>
    </ion-content>
  </ion-page>
</template>

<script lang="ts">
import { defineComponent } from 'vue';
import { IonInput, IonPage, IonContent, createAnimation } from '@ionic/vue';
import { ref } from 'vue';

export default defineComponent({
  name: 'Tab1Page',
  components: {IonContent, IonPage, IonInput },
  methods: {
    sendInput: async function() {
      let url = "defaultURL";
      this.loading = true;
      let response = await fetch(url + this.size + "/" + encodeURIComponent(this.input), {
        method: 'GET',
        headers: {},
      })
      let data = await response.json()
      this.imageUrl = data["data"];
      this.loading = false;
    }
  },
  data(){
    return{
      input: '',
      imageUrl: '',
      loading:false,
      size: 1,
      loadingText: "Loading"
    }
  },
  mounted(){

    setInterval(async () => {
       if(this.loadingText.length>9){
          this.loadingText = "Loading"
       } else {
          this.loadingText += "."
       }
      }, 500);

  },
});
</script>
